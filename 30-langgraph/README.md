# WP-LangGraph - WordPress LangGraph-Style Plugin with Tools

A WordPress plugin demonstrating **graph-style workflows** and **intelligent tool calling** using LangChain.js and OpenAI's GPT-4o-mini model.

## ğŸ¯ What This Plugin Does

This plugin combines three powerful AI capabilities:

### ğŸ› ï¸ **Tool-Based Processing**
The plugin intelligently detects when users need specific WordPress data and automatically executes appropriate tools:

1. **Get Categories & Tags Statistics** - Lists all categories and tags with their post counts
2. **Get Random Post (French Translation)** - Retrieves a random published post and translates it to French
3. **Deep Research Tool** - Summarizes all posts for a particular category, providing comprehensive insights and analysis

The plugin automatically chooses the appropriate tool based on user intent, demonstrating advanced AI decision-making and tool selection.

## ğŸ“‹ Prerequisites

Before using this plugin, you need:

1. **WordPress installation** (obviously!)
2. **OpenAI API Key** - Get one from [OpenAI](https://platform.openai.com/)
3. **02-wp-basic-agent plugin installed** - This plugin stores your OpenAI API key in the WordPress database

## ğŸš€ Installation

### Step 1: Install Dependencies

```bash
cd 30-langgraph
npm install --legacy-peer-deps
```

### Step 2: Build the Plugin

```bash
npm run build
```

This will create the `build` folder with:
- `index.js` - Bundled JavaScript
- `style-index.css` - Bundled CSS  
- `index.asset.php` - Asset dependencies

### Step 3: Activate in WordPress

1. Copy the entire `30-langgraph` folder to your WordPress plugins directory
2. Go to WordPress Admin â†’ Plugins
3. Activate "âœ… 30 UDEMY LANGGRAPH"

## ğŸ”‘ Setting Up Your API Key

**IMPORTANT:** This plugin uses the API key from the **02 AGENT JS** plugin.

1. Go to WordPress Admin â†’ **02 AGENT JS**
2. Enter and save your OpenAI API key
3. Now you can use the LangGraph plugin!

## ğŸ“– Usage

1. Go to WordPress Admin â†’ **30 LANGGRAPH**
2. Enter text in the textarea (e.g., "Tell me about WordPress")
3. Click "Process with Graph Workflow"
4. View the final comprehensive response!

## ğŸ”§ Development

### File Structure

```
30-langgraph/
â”œâ”€â”€ wp-langgraph.php           # Main plugin file
â”œâ”€â”€ package.json               # NPM dependencies
â”œâ”€â”€ build/                     # Generated by npm run build
â”‚   â”œâ”€â”€ index.js              # Bundled JavaScript
â”‚   â”œâ”€â”€ style-index.css       # Bundled CSS
â”‚   â””â”€â”€ index.asset.php       # Asset dependencies
â”œâ”€â”€ src/                       # Source files
â”‚   â”œâ”€â”€ index.js              # Main application logic
â”‚   â””â”€â”€ style.css             # Application styles
â””â”€â”€ admin/                     # Admin interface
    â”œâ”€â”€ admin-page-template.php
    â””â”€â”€ assets/
        â”œâ”€â”€ css/
        â””â”€â”€ js/
```

### Development Mode

To work on the plugin with hot reload:

```bash
npm start
```

This will watch for file changes and rebuild automatically.

### Rebuilding

After making changes to `src/index.js` or `src/style.css`:

```bash
npm run build
```

## ğŸ¨ Key Features

### âœ… Graph-Style Workflow
- Demonstrates sequential node processing
- Maintains state across all nodes
- Clear visualization of each processing step

### âœ… Abundant Debug Messages
- Extensive console logging at each step
- Easy to understand what's happening
- Great for learning and debugging

### âœ… WordPress Integration
- Uses WordPress AJAX for API key retrieval
- No dotenv - API key stored in WP database
- Follows WordPress plugin best practices

### âœ… Clean Architecture
- Separate concerns (UI, logic, styling)
- Well-commented code
- Educational comments explaining concepts

## ğŸ’¡ Understanding the Code

### Why Not Use LangGraph's StateGraph?

LangGraph's `StateGraph` requires Node.js modules (like `async_hooks`) that don't work in browsers. Instead, we:

1. **Simulate the graph concept** with sequential function calls
2. **Maintain state** through a JavaScript object
3. **Achieve the same result** without Node.js dependencies

### The Workflow Pattern

```javascript
// Initial State
state = {
    input: "user input",
    analysis: "",
    processed: "",
    final_response: ""
}

// Node 1: Analyzer
state.analysis = await analyzeInput(state.input)

// Node 2: Processor  
state.processed = await processAnalysis(state)

// Node 3: Responder
state.final_response = await generateResponse(state)

// Final result is in state.final_response
```

This is exactly how LangGraph works, just without the complex StateGraph wrapper!

## ğŸ› Debugging

### Check the Browser Console (F12)

The plugin outputs extensive debug messages:
- ğŸš€ Plugin loaded
- ğŸ“„ DOM loaded
- ğŸ”‘ API key retrieved
- ğŸ“ Each node execution
- âœ… Completion status

### Common Issues

**"No API key found"**
- Make sure the 02 AGENT JS plugin is installed
- Save your OpenAI API key in 02 AGENT JS settings

**"Build folder missing"**
- Run `npm run build` to create the build folder

**"Module not found" errors**
- Run `npm install --legacy-peer-deps`

## ğŸ“š Learning Resources

This plugin demonstrates:
- **Graph-based workflows** (like LangGraph)
- **State management** in AI applications  
- **Sequential processing** with language models
- **WordPress plugin development** with modern JS
- **Webpack bundling** with @wordpress/scripts

## ğŸ”— Related Plugins

- **11-wp-langchain** - Basic LangChain example
- **02-wp-basic-agent** - Basic agent with API key storage

## ğŸ“ License

GPL-2.0-or-later

## ğŸ‘¨â€ğŸ’» Author

Craig West - UDEMY WordPress AI Course

---

**Note:** This plugin uses `@wordpress/scripts` for bundling, which is the WordPress-recommended way to build modern JavaScript applications for WordPress.
Craig West - UDEMY WordPress AI Course
